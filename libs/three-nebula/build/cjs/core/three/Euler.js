"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Euler = Euler;

var _Quaternion = require("./Quaternion.js");

var _Vector = require("./Vector3.js");

var _Matrix = require("./Matrix4.js");

var _Math2 = require("./Math.js");

/**
 * @author mrdoob / http://mrdoob.com/
 * @author WestLangley / http://github.com/WestLangley
 * @author bhouston / http://clara.io
 */
function Euler(x, y, z, order) {
  this._x = x || 0;
  this._y = y || 0;
  this._z = z || 0;
  this._order = order || Euler.DefaultOrder;
}

Euler.RotationOrders = ['XYZ', 'YZX', 'ZXY', 'XZY', 'YXZ', 'ZYX'];
Euler.DefaultOrder = 'XYZ';
Object.defineProperties(Euler.prototype, {
  x: {
    get: function get() {
      return this._x;
    },
    set: function set(value) {
      this._x = value;

      this._onChangeCallback();
    }
  },
  y: {
    get: function get() {
      return this._y;
    },
    set: function set(value) {
      this._y = value;

      this._onChangeCallback();
    }
  },
  z: {
    get: function get() {
      return this._z;
    },
    set: function set(value) {
      this._z = value;

      this._onChangeCallback();
    }
  },
  order: {
    get: function get() {
      return this._order;
    },
    set: function set(value) {
      this._order = value;

      this._onChangeCallback();
    }
  }
});
Object.assign(Euler.prototype, {
  isEuler: true,
  set: function set(x, y, z, order) {
    this._x = x;
    this._y = y;
    this._z = z;
    this._order = order || this._order;

    this._onChangeCallback();

    return this;
  },
  clone: function clone() {
    return new this.constructor(this._x, this._y, this._z, this._order);
  },
  copy: function copy(euler) {
    this._x = euler._x;
    this._y = euler._y;
    this._z = euler._z;
    this._order = euler._order;

    this._onChangeCallback();

    return this;
  },
  setFromRotationMatrix: function setFromRotationMatrix(m, order, update) {
    var clamp = _Math2._Math.clamp; // assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)

    var te = m.elements;
    var m11 = te[0],
        m12 = te[4],
        m13 = te[8];
    var m21 = te[1],
        m22 = te[5],
        m23 = te[9];
    var m31 = te[2],
        m32 = te[6],
        m33 = te[10];
    order = order || this._order;

    if (order === 'XYZ') {
      this._y = Math.asin(clamp(m13, -1, 1));

      if (Math.abs(m13) < 0.99999) {
        this._x = Math.atan2(-m23, m33);
        this._z = Math.atan2(-m12, m11);
      } else {
        this._x = Math.atan2(m32, m22);
        this._z = 0;
      }
    } else if (order === 'YXZ') {
      this._x = Math.asin(-clamp(m23, -1, 1));

      if (Math.abs(m23) < 0.99999) {
        this._y = Math.atan2(m13, m33);
        this._z = Math.atan2(m21, m22);
      } else {
        this._y = Math.atan2(-m31, m11);
        this._z = 0;
      }
    } else if (order === 'ZXY') {
      this._x = Math.asin(clamp(m32, -1, 1));

      if (Math.abs(m32) < 0.99999) {
        this._y = Math.atan2(-m31, m33);
        this._z = Math.atan2(-m12, m22);
      } else {
        this._y = 0;
        this._z = Math.atan2(m21, m11);
      }
    } else if (order === 'ZYX') {
      this._y = Math.asin(-clamp(m31, -1, 1));

      if (Math.abs(m31) < 0.99999) {
        this._x = Math.atan2(m32, m33);
        this._z = Math.atan2(m21, m11);
      } else {
        this._x = 0;
        this._z = Math.atan2(-m12, m22);
      }
    } else if (order === 'YZX') {
      this._z = Math.asin(clamp(m21, -1, 1));

      if (Math.abs(m21) < 0.99999) {
        this._x = Math.atan2(-m23, m22);
        this._y = Math.atan2(-m31, m11);
      } else {
        this._x = 0;
        this._y = Math.atan2(m13, m33);
      }
    } else if (order === 'XZY') {
      this._z = Math.asin(-clamp(m12, -1, 1));

      if (Math.abs(m12) < 0.99999) {
        this._x = Math.atan2(m32, m22);
        this._y = Math.atan2(m13, m11);
      } else {
        this._x = Math.atan2(-m23, m33);
        this._y = 0;
      }
    } else {
      console.warn('THREE.Euler: .setFromRotationMatrix() given unsupported order: ' + order);
    }

    this._order = order;
    if (update !== false) this._onChangeCallback();
    return this;
  },
  setFromQuaternion: function () {
    var matrix = new _Matrix.Matrix4();
    return function setFromQuaternion(q, order, update) {
      matrix.makeRotationFromQuaternion(q);
      return this.setFromRotationMatrix(matrix, order, update);
    };
  }(),
  setFromVector3: function setFromVector3(v, order) {
    return this.set(v.x, v.y, v.z, order || this._order);
  },
  reorder: function () {
    // WARNING: this discards revolution information -bhouston
    var q = new _Quaternion.Quaternion();
    return function reorder(newOrder) {
      q.setFromEuler(this);
      return this.setFromQuaternion(q, newOrder);
    };
  }(),
  equals: function equals(euler) {
    return euler._x === this._x && euler._y === this._y && euler._z === this._z && euler._order === this._order;
  },
  fromArray: function fromArray(array) {
    this._x = array[0];
    this._y = array[1];
    this._z = array[2];
    if (array[3] !== undefined) this._order = array[3];

    this._onChangeCallback();

    return this;
  },
  toArray: function toArray(array, offset) {
    if (array === undefined) array = [];
    if (offset === undefined) offset = 0;
    array[offset] = this._x;
    array[offset + 1] = this._y;
    array[offset + 2] = this._z;
    array[offset + 3] = this._order;
    return array;
  },
  toVector3: function toVector3(optionalResult) {
    if (optionalResult) {
      return optionalResult.set(this._x, this._y, this._z);
    } else {
      return new _Vector.Vector3(this._x, this._y, this._z);
    }
  },
  _onChange: function _onChange(callback) {
    this._onChangeCallback = callback;
    return this;
  },
  _onChangeCallback: function _onChangeCallback() {}
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9jb3JlL3RocmVlL0V1bGVyLmpzIl0sIm5hbWVzIjpbIkV1bGVyIiwieCIsInkiLCJ6Iiwib3JkZXIiLCJfeCIsIl95IiwiX3oiLCJfb3JkZXIiLCJEZWZhdWx0T3JkZXIiLCJSb3RhdGlvbk9yZGVycyIsIk9iamVjdCIsImRlZmluZVByb3BlcnRpZXMiLCJwcm90b3R5cGUiLCJnZXQiLCJzZXQiLCJ2YWx1ZSIsIl9vbkNoYW5nZUNhbGxiYWNrIiwiYXNzaWduIiwiaXNFdWxlciIsImNsb25lIiwiY29uc3RydWN0b3IiLCJjb3B5IiwiZXVsZXIiLCJzZXRGcm9tUm90YXRpb25NYXRyaXgiLCJtIiwidXBkYXRlIiwiY2xhbXAiLCJfTWF0aCIsInRlIiwiZWxlbWVudHMiLCJtMTEiLCJtMTIiLCJtMTMiLCJtMjEiLCJtMjIiLCJtMjMiLCJtMzEiLCJtMzIiLCJtMzMiLCJNYXRoIiwiYXNpbiIsImFicyIsImF0YW4yIiwiY29uc29sZSIsIndhcm4iLCJzZXRGcm9tUXVhdGVybmlvbiIsIm1hdHJpeCIsIk1hdHJpeDQiLCJxIiwibWFrZVJvdGF0aW9uRnJvbVF1YXRlcm5pb24iLCJzZXRGcm9tVmVjdG9yMyIsInYiLCJyZW9yZGVyIiwiUXVhdGVybmlvbiIsIm5ld09yZGVyIiwic2V0RnJvbUV1bGVyIiwiZXF1YWxzIiwiZnJvbUFycmF5IiwiYXJyYXkiLCJ1bmRlZmluZWQiLCJ0b0FycmF5Iiwib2Zmc2V0IiwidG9WZWN0b3IzIiwib3B0aW9uYWxSZXN1bHQiLCJWZWN0b3IzIiwiX29uQ2hhbmdlIiwiY2FsbGJhY2siXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUEsU0FBU0EsS0FBVCxDQUFnQkMsQ0FBaEIsRUFBbUJDLENBQW5CLEVBQXNCQyxDQUF0QixFQUF5QkMsS0FBekIsRUFBaUM7QUFFaEMsT0FBS0MsRUFBTCxHQUFVSixDQUFDLElBQUks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ZUFBSixDQUFhLEtBQUs1RCxFQUFsQixFQUFzQixLQUFLQyxFQUEzQixFQUErQixLQUFLQyxFQUFwQyxDQUFQO0FBRUE7QUFFRCxHQWhQOEI7QUFrUC9CMkQsRUFBQUEsU0FBUyxFQUFFLG1CQUFXQyxRQUFYLEVBQXNCO0FBRWhDLFNBQUtsRCxpQkFBTCxHQUF5QmtELFFBQXpCO0FBRUEsV0FBTyxJQUFQO0FBRUEsR0F4UDhCO0FBMFAvQmxELEVBQUFBLGlCQUFpQixFQUFFLDZCQUFZLENBQUU7QUExUEYsQ0FBaEMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBRdWF0ZXJuaW9uIH0gZnJvbSAnLi9RdWF0ZXJuaW9uLmpzJztcbmltcG9ydCB7IFZlY3RvcjMgfSBmcm9tICcuL1ZlY3RvcjMuanMnO1xuaW1wb3J0IHsgTWF0cml4NCB9IGZyb20gJy4vTWF0cml4NC5qcyc7XG5pbXBvcnQgeyBfTWF0aCB9IGZyb20gJy4vTWF0aC5qcyc7XG5cbi8qKlxuICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbS9cbiAqIEBhdXRob3IgV2VzdExhbmdsZXkgLyBodHRwOi8vZ2l0aHViLmNvbS9XZXN0TGFuZ2xleVxuICogQGF1dGhvciBiaG91c3RvbiAvIGh0dHA6Ly9jbGFyYS5pb1xuICovXG5cbmZ1bmN0aW9uIEV1bGVyKCB4LCB5LCB6LCBvcmRlciApIHtcblxuXHR0aGlzLl94ID0geCB8fCAwO1xuXHR0aGlzLl95ID0geSB8fCAwO1xuXHR0aGlzLl96ID0geiB8fCAwO1xuXHR0aGlzLl9vcmRlciA9IG9yZGVyIHx8IEV1bGVyLkRlZmF1bHRPcmRlcjtcblxufVxuXG5FdWxlci5Sb3RhdGlvbk9yZGVycyA9IFsgJ1hZWicsICdZWlgnLCAnWlhZJywgJ1haWScsICdZWFonLCAnWllYJyBdO1xuXG5FdWxlci5EZWZhdWx0T3JkZXIgPSAnWFlaJztcblxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoIEV1bGVyLnByb3RvdHlwZSwge1xuXG5cdHg6IHtcblxuXHRcdGdldDogZnVuY3Rpb24gKCkge1xuXG5cdFx0XHRyZXR1cm4gdGhpcy5feDtcblxuXHRcdH0sXG5cblx0XHRzZXQ6IGZ1bmN0aW9uICggdmFsdWUgKSB7XG5cblx0XHRcdHRoaXMuX3ggPSB2YWx1ZTtcblx0XHRcdHRoaXMuX29uQ2hhbmdlQ2FsbGJhY2soKTtcblxuXHRcdH1cblxuXHR9LFxuXG5cdHk6IHtcblxuXHRcdGdldDogZnVuY3Rpb24gKCkge1xuXG5cdFx0XHRyZXR1cm4gdGhpcy5feTtcblxuXHRcdH0sXG5cblx0XHRzZXQ6IGZ1bmN0aW9uICggdmFsdWUgKSB7XG5cblx0XHRcdHRoaXMuX3kgPSB2YWx1ZTtcblx0XHRcdHRoaXMuX29uQ2hhbmdlQ2FsbGJhY2soKTtcblxuXHRcdH1cblxuXHR9LFxuXG5cdHo6IHtcblxuXHRcdGdldDogZnVuY3Rpb24gKCkge1xuXG5cdFx0XHRyZXR1cm4gdGhpcy5fejtcblxuXHRcdH0sXG5cblx0XHRzZXQ6IGZ1bmN0aW9uICggdmFsdWUgKSB7XG5cblx0XHRcdHRoaXMuX3ogPSB2YWx1ZTtcblx0XHRcdHRoaXMuX29uQ2hhbmdlQ2FsbGJhY2soKTtcblxuXHRcdH1cblxuXHR9LFxuXG5cdG9yZGVyOiB7XG5cblx0XHRnZXQ6IGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0cmV0dXJuIHRoaXMuX29yZGVyO1xuXG5cdFx0fSxcblxuXHRcdHNldDogZnVuY3Rpb24gKCB2YWx1ZSApIHtcblxuXHRcdFx0dGhpcy5fb3JkZXIgPSB2YWx1ZTtcblx0XHRcdHRoaXMuX29uQ2hhbmdlQ2FsbGJhY2soKTtcblxuXHRcdH1cblxuXHR9XG5cbn0gKTtcblxuT2JqZWN0LmFzc2lnbiggRXVsZXIucHJvdG90eXBlLCB7XG5cblx0aXNFdWxlcjogdHJ1ZSxcblxuXHRzZXQ6IGZ1bmN0aW9uICggeCwgeSwgeiwgb3JkZXIgKSB7XG5cblx0XHR0aGlzLl94ID0geDtcblx0XHR0aGlzLl95ID0geTtcblx0XHR0aGlzLl96ID0gejtcblx0XHR0aGlzLl9vcmRlciA9IG9yZGVyIHx8IHRoaXMuX29yZGVyO1xuXG5cdFx0dGhpcy5fb25DaGFuZ2VDYWxsYmFjaygpO1xuXG5cdFx0cmV0dXJuIHRoaXM7XG5cblx0fSxcblxuXHRjbG9uZTogZnVuY3Rpb24gKCkge1xuXG5cdFx0cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKCB0aGlzLl94LCB0aGlzLl95LCB0aGlzLl96LCB0aGlzLl9vcmRlciApO1xuXG5cdH0sXG5cblx0Y29weTogZnVuY3Rpb24gKCBldWxlciApIHtcblxuXHRcdHRoaXMuX3ggPSBldWxlci5feDtcblx0XHR0aGlzLl95ID0gZXVsZXIuX3k7XG5cdFx0dGhpcy5feiA9IGV1bGVyLl96O1xuXHRcdHRoaXMuX29yZGVyID0gZXVsZXIuX29yZGVyO1xuXG5cdFx0dGhpcy5fb25DaGFuZ2VDYWxsYmFjaygpO1xuXG5cdFx0cmV0dXJuIHRoaXM7XG5cblx0fSxcblxuXHRzZXRGcm9tUm90YXRpb25NYXRyaXg6IGZ1bmN0aW9uICggbSwgb3JkZXIsIHVwZGF0ZSApIHtcblxuXHRcdHZhciBjbGFtcCA9IF9NYXRoLmNsYW1wO1xuXG5cdFx0Ly8gYXNzdW1lcyB0aGUgdXBwZXIgM3gzIG9mIG0gaXMgYSBwdXJlIHJvdGF0aW9uIG1hdHJpeCAoaS5lLCB1bnNjYWxlZClcblxuXHRcdHZhciB0ZSA9IG0uZWxlbWVudHM7XG5cdFx0dmFyIG0xMSA9IHRlWyAwIF0sIG0xMiA9IHRlWyA0IF0sIG0xMyA9IHRlWyA4IF07XG5cdFx0dmFyIG0yMSA9IHRlWyAxIF0sIG0yMiA9IHRlWyA1IF0sIG0yMyA9IHRlWyA5IF07XG5cdFx0dmFyIG0zMSA9IHRlWyAyIF0sIG0zMiA9IHRlWyA2IF0sIG0zMyA9IHRlWyAxMCBdO1xuXG5cdFx0b3JkZXIgPSBvcmRlciB8fCB0aGlzLl9vcmRlcjtcblxuXHRcdGlmICggb3JkZXIgPT09ICdYWVonICkge1xuXG5cdFx0XHR0aGlzLl95ID0gTWF0aC5hc2luKCBjbGFtcCggbTEzLCAtIDEsIDEgKSApO1xuXG5cdFx0XHRpZiAoIE1hdGguYWJzKCBtMTMgKSA8IDAuOTk5OTkgKSB7XG5cblx0XHRcdFx0dGhpcy5feCA9IE1hdGguYXRhbjIoIC0gbTIzLCBtMzMgKTtcblx0XHRcdFx0dGhpcy5feiA9IE1hdGguYXRhbjIoIC0gbTEyLCBtMTEgKTtcblxuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHR0aGlzLl94ID0gTWF0aC5hdGFuMiggbTMyLCBtMjIgKTtcblx0XHRcdFx0dGhpcy5feiA9IDA7XG5cblx0XHRcdH1cblxuXHRcdH0gZWxzZSBpZiAoIG9yZGVyID09PSAnWVhaJyApIHtcblxuXHRcdFx0dGhpcy5feCA9IE1hdGguYXNpbiggLSBjbGFtcCggbTIzLCAtIDEsIDEgKSApO1xuXG5cdFx0XHRpZiAoIE1hdGguYWJzKCBtMjMgKSA8IDAuOTk5OTkgKSB7XG5cblx0XHRcdFx0dGhpcy5feSA9IE1hdGguYXRhbjIoIG0xMywgbTMzICk7XG5cdFx0XHRcdHRoaXMuX3ogPSBNYXRoLmF0YW4yKCBtMjEsIG0yMiApO1xuXG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdHRoaXMuX3kgPSBNYXRoLmF0YW4yKCAtIG0zMSwgbTExICk7XG5cdFx0XHRcdHRoaXMuX3ogPSAwO1xuXG5cdFx0XHR9XG5cblx0XHR9IGVsc2UgaWYgKCBvcmRlciA9PT0gJ1pYWScgKSB7XG5cblx0XHRcdHRoaXMuX3ggPSBNYXRoLmFzaW4oIGNsYW1wKCBtMzIsIC0gMSwgMSApICk7XG5cblx0XHRcdGlmICggTWF0aC5hYnMoIG0zMiApIDwgMC45OTk5OSApIHtcblxuXHRcdFx0XHR0aGlzLl95ID0gTWF0aC5hdGFuMiggLSBtMzEsIG0zMyApO1xuXHRcdFx0XHR0aGlzLl96ID0gTWF0aC5hdGFuMiggLSBtMTIsIG0yMiApO1xuXG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdHRoaXMuX3kgPSAwO1xuXHRcdFx0XHR0aGlzLl96ID0gTWF0aC5hdGFuMiggbTIxLCBtMTEgKTtcblxuXHRcdFx0fVxuXG5cdFx0fSBlbHNlIGlmICggb3JkZXIgPT09ICdaWVgnICkge1xuXG5cdFx0XHR0aGlzLl95ID0gTWF0aC5hc2luKCAtIGNsYW1wKCBtMzEsIC0gMSwgMSApICk7XG5cblx0XHRcdGlmICggTWF0aC5hYnMoIG0zMSApIDwgMC45OTk5OSApIHtcblxuXHRcdFx0XHR0aGlzLl94ID0gTWF0aC5hdGFuMiggbTMyLCBtMzMgKTtcblx0XHRcdFx0dGhpcy5feiA9IE1hdGguYXRhbjIoIG0yMSwgbTExICk7XG5cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0dGhpcy5feCA9IDA7XG5cdFx0XHRcdHRoaXMuX3ogPSBNYXRoLmF0YW4yKCAtIG0xMiwgbTIyICk7XG5cblx0XHRcdH1cblxuXHRcdH0gZWxzZSBpZiAoIG9yZGVyID09PSAnWVpYJyApIHtcblxuXHRcdFx0dGhpcy5feiA9IE1hdGguYXNpbiggY2xhbXAoIG0yMSwgLSAxLCAxICkgKTtcblxuXHRcdFx0aWYgKCBNYXRoLmFicyggbTIxICkgPCAwLjk5OTk5ICkge1xuXG5cdFx0XHRcdHRoaXMuX3ggPSBNYXRoLmF0YW4yKCAtIG0yMywgbTIyICk7XG5cdFx0XHRcdHRoaXMuX3kgPSBNYXRoLmF0YW4yKCAtIG0zMSwgbTExICk7XG5cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0dGhpcy5feCA9IDA7XG5cdFx0XHRcdHRoaXMuX3kgPSBNYXRoLmF0YW4yKCBtMTMsIG0zMyApO1xuXG5cdFx0XHR9XG5cblx0XHR9IGVsc2UgaWYgKCBvcmRlciA9PT0gJ1haWScgKSB7XG5cblx0XHRcdHRoaXMuX3ogPSBNYXRoLmFzaW4oIC0gY2xhbXAoIG0xMiwgLSAxLCAxICkgKTtcblxuXHRcdFx0aWYgKCBNYXRoLmFicyggbTEyICkgPCAwLjk5OTk5ICkge1xuXG5cdFx0XHRcdHRoaXMuX3ggPSBNYXRoLmF0YW4yKCBtMzIsIG0yMiApO1xuXHRcdFx0XHR0aGlzLl95ID0gTWF0aC5hdGFuMiggbTEzLCBtMTEgKTtcblxuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHR0aGlzLl94ID0gTWF0aC5hdGFuMiggLSBtMjMsIG0zMyApO1xuXHRcdFx0XHR0aGlzLl95ID0gMDtcblxuXHRcdFx0fVxuXG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0Y29uc29sZS53YXJuKCAnVEhSRUUuRXVsZXI6IC5zZXRGcm9tUm90YXRpb25NYXRyaXgoKSBnaXZlbiB1bnN1cHBvcnRlZCBvcmRlcjogJyArIG9yZGVyICk7XG5cblx0XHR9XG5cblx0XHR0aGlzLl9vcmRlciA9IG9yZGVyO1xuXG5cdFx0aWYgKCB1cGRhdGUgIT09IGZhbHNlICkgdGhpcy5fb25DaGFuZ2VDYWxsYmFjaygpO1xuXG5cdFx0cmV0dXJuIHRoaXM7XG5cblx0fSxcblxuXHRzZXRGcm9tUXVhdGVybmlvbjogZnVuY3Rpb24gKCkge1xuXG5cdFx0dmFyIG1hdHJpeCA9IG5ldyBNYXRyaXg0KCk7XG5cblx0XHRyZXR1cm4gZnVuY3Rpb24gc2V0RnJvbVF1YXRlcm5pb24oIHEsIG9yZGVyLCB1cGRhdGUgKSB7XG5cblx0XHRcdG1hdHJpeC5tYWtlUm90YXRpb25Gcm9tUXVhdGVybmlvbiggcSApO1xuXG5cdFx0XHRyZXR1cm4gdGhpcy5zZXRGcm9tUm90YXRpb25NYXRyaXgoIG1hdHJpeCwgb3JkZXIsIHVwZGF0ZSApO1xuXG5cdFx0fTtcblxuXHR9KCksXG5cblx0c2V0RnJvbVZlY3RvcjM6IGZ1bmN0aW9uICggdiwgb3JkZXIgKSB7XG5cblx0XHRyZXR1cm4gdGhpcy5zZXQoIHYueCwgdi55LCB2LnosIG9yZGVyIHx8IHRoaXMuX29yZGVyICk7XG5cblx0fSxcblxuXHRyZW9yZGVyOiBmdW5jdGlvbiAoKSB7XG5cblx0XHQvLyBXQVJOSU5HOiB0aGlzIGRpc2NhcmRzIHJldm9sdXRpb24gaW5mb3JtYXRpb24gLWJob3VzdG9uXG5cblx0XHR2YXIgcSA9IG5ldyBRdWF0ZXJuaW9uKCk7XG5cblx0XHRyZXR1cm4gZnVuY3Rpb24gcmVvcmRlciggbmV3T3JkZXIgKSB7XG5cblx0XHRcdHEuc2V0RnJvbUV1bGVyKCB0aGlzICk7XG5cblx0XHRcdHJldHVybiB0aGlzLnNldEZyb21RdWF0ZXJuaW9uKCBxLCBuZXdPcmRlciApO1xuXG5cdFx0fTtcblxuXHR9KCksXG5cblx0ZXF1YWxzOiBmdW5jdGlvbiAoIGV1bGVyICkge1xuXG5cdFx0cmV0dXJuICggZXVsZXIuX3ggPT09IHRoaXMuX3ggKSAmJiAoIGV1bGVyLl95ID09PSB0aGlzLl95ICkgJiYgKCBldWxlci5feiA9PT0gdGhpcy5feiApICYmICggZXVsZXIuX29yZGVyID09PSB0aGlzLl9vcmRlciApO1xuXG5cdH0sXG5cblx0ZnJvbUFycmF5OiBmdW5jdGlvbiAoIGFycmF5ICkge1xuXG5cdFx0dGhpcy5feCA9IGFycmF5WyAwIF07XG5cdFx0dGhpcy5feSA9IGFycmF5WyAxIF07XG5cdFx0dGhpcy5feiA9IGFycmF5WyAyIF07XG5cdFx0aWYgKCBhcnJheVsgMyBdICE9PSB1bmRlZmluZWQgKSB0aGlzLl9vcmRlciA9IGFycmF5WyAzIF07XG5cblx0XHR0aGlzLl9vbkNoYW5nZUNhbGxiYWNrKCk7XG5cblx0XHRyZXR1cm4gdGhpcztcblxuXHR9LFxuXG5cdHRvQXJyYXk6IGZ1bmN0aW9uICggYXJyYXksIG9mZnNldCApIHtcblxuXHRcdGlmICggYXJyYXkgPT09IHVuZGVmaW5lZCApIGFycmF5ID0gW107XG5cdFx0aWYgKCBvZmZzZXQgPT09IHVuZGVmaW5lZCApIG9mZnNldCA9IDA7XG5cblx0XHRhcnJheVsgb2Zmc2V0IF0gPSB0aGlzLl94O1xuXHRcdGFycmF5WyBvZmZzZXQgKyAxIF0gPSB0aGlzLl95O1xuXHRcdGFycmF5WyBvZmZzZXQgKyAyIF0gPSB0aGlzLl96O1xuXHRcdGFycmF5WyBvZmZzZXQgKyAzIF0gPSB0aGlzLl9vcmRlcjtcblxuXHRcdHJldHVybiBhcnJheTtcblxuXHR9LFxuXG5cdHRvVmVjdG9yMzogZnVuY3Rpb24gKCBvcHRpb25hbFJlc3VsdCApIHtcblxuXHRcdGlmICggb3B0aW9uYWxSZXN1bHQgKSB7XG5cblx0XHRcdHJldHVybiBvcHRpb25hbFJlc3VsdC5zZXQoIHRoaXMuX3gsIHRoaXMuX3ksIHRoaXMuX3ogKTtcblxuXHRcdH0gZWxzZSB7XG5cblx0XHRcdHJldHVybiBuZXcgVmVjdG9yMyggdGhpcy5feCwgdGhpcy5feSwgdGhpcy5feiApO1xuXG5cdFx0fVxuXG5cdH0sXG5cblx0X29uQ2hhbmdlOiBmdW5jdGlvbiAoIGNhbGxiYWNrICkge1xuXG5cdFx0dGhpcy5fb25DaGFuZ2VDYWxsYmFjayA9IGNhbGxiYWNrO1xuXG5cdFx0cmV0dXJuIHRoaXM7XG5cblx0fSxcblxuXHRfb25DaGFuZ2VDYWxsYmFjazogZnVuY3Rpb24gKCkge31cblxufSApO1xuXG5cbmV4cG9ydCB7IEV1bGVyIH07Il19