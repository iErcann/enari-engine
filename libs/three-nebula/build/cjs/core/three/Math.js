"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports._Math = void 0;

/**
 * @author alteredq / http://alteredqualia.com/
 * @author mrdoob / http://mrdoob.com/
 */
var _Math = {
  DEG2RAD: Math.PI / 180,
  RAD2DEG: 180 / Math.PI,
  generateUUID: function () {
    // http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136
    var lut = [];

    for (var i = 0; i < 256; i++) {
      lut[i] = (i < 16 ? '0' : '') + i.toString(16);
    }

    return function generateUUID() {
      var d0 = Math.random() * 0xffffffff | 0;
      var d1 = Math.random() * 0xffffffff | 0;
      var d2 = Math.random() * 0xffffffff | 0;
      var d3 = Math.random() * 0xffffffff | 0;
      var uuid = lut[d0 & 0xff] + lut[d0 >> 8 & 0xff] + lut[d0 >> 16 & 0xff] + lut[d0 >> 24 & 0xff] + '-' + lut[d1 & 0xff] + lut[d1 >> 8 & 0xff] + '-' + lut[d1 >> 16 & 0x0f | 0x40] + lut[d1 >> 24 & 0xff] + '-' + lut[d2 & 0x3f | 0x80] + lut[d2 >> 8 & 0xff] + '-' + lut[d2 >> 16 & 0xff] + lut[d2 >> 24 & 0xff] + lut[d3 & 0xff] + lut[d3 >> 8 & 0xff] + lut[d3 >> 16 & 0xff] + lut[d3 >> 24 & 0xff]; // .toUpperCase() here flattens concatenated strings to save heap memory space.

      return uuid.toUpperCase();
    };
  }(),
  clamp: function clamp(value, min, max) {
    return Math.max(min, Math.min(max, value));
  },
  // compute euclidian modulo of m % n
  // https://en.wikipedia.org/wiki/Modulo_operation
  euclideanModulo: function euclideanModulo(n, m) {
    return (n % m + m) % m;
  },
  // Linear mapping from range <a1, a2> to range <b1, b2>
  mapLinear: function mapLinear(x, a1, a2, b1, b2) {
    return b1 + (x - a1) * (b2 - b1) / (a2 - a1);
  },
  // https://en.wikipedia.org/wiki/Linear_interpolation
  lerp: function lerp(x, y, t) {
    return (1 - t) * x + t * y;
  },
  // http://en.wikipedia.org/wiki/Smoothstep
  smoothstep: function smoothstep(x, min, max) {
    if (x <= min) return 0;
    if (x >= max) return 1;
    x = (x - min) / (max - min);
    return x * x * (3 - 2 * x);
  },
  smootherstep: function smootherstep(x, min, max) {
    if (x <= min) return 0;
    if (x >= max) return 1;
    x = (x - min) / (max - min);
    return x * x * x * (x * (x * 6 - 15) + 10);
  },
  // Random integer from <low, high> interval
  randInt: function randInt(low, high) {
    return low + Math.floor(Math.random() * (high - low + 1));
  },
  // Random float from <low, high> interval
  randFloat: function randFloat(low, high) {
    return low + Math.random() * (high - low);
  },
  // Random float from <-range/2, range/2> interval
  randFloatSpread: function randFloatSpread(range) {
    return range * (0.5 - Math.random());
  },
  degToRad: function degToRad(degrees) {
    return degrees * _Math.DEG2RAD;
  },
  radToDeg: function radToDeg(radians) {
    return radians * _Math.RAD2DEG;
  },
  isPowerOfTwo: function isPowerOfTwo(value) {
    return (value & value - 1) === 0 && value !== 0;
  },
  ceilPowerOfTwo: function ceilPowerOfTwo(value) {
    return Math.pow(2, Math.ceil(Math.log(value) / Math.LN2));
  },
  floorPowerOfTwo: function floorPowerOfTwo(value) {
    return Math.pow(2, Math.floor(Math.log(value) / Math.LN2));
  }
};
exports._Math = _Math;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9jb3JlL3RocmVlL01hdGguanMiXSwibmFtZXMiOlsiX01hdGgiLCJERUcyUkFEIiwiTWF0aCIsIlBJIiwiUkFEMkRFRyIsImdlbmVyYXRlVVVJRCIsImx1dCIsImkiLCJ0b1N0cmluZyIsImQwIiwicmFuZG9tIiwiZDEiLCJkMiIsImQzIiwidXVpZCIsInRvVXBwZXJDYXNlIiwiY2xhbXAiLCJ2YWx1ZSIsIm1pbiIsIm1heCIsImV1Y2xpZGVhbk1vZHVsbyIsIm4iLCJtIiwibWFwTGluZWFyIiwieCIsImExIiwiYTIiLCJiMSIsImIyIiwibGVycCIsInkiLCJ0Iiwic21vb3Roc3RlcCIsInNtb290aGVyc3RlcCIsInJhbmRJbnQiLCJsb3ciLCJoaWdoIiwiZmxvb3IiLCJyYW5kRmxvYXQiLCJyYW5kRmxvYXRTcHJlYWQiLCJyYW5nZSIsImRlZ1RvUmFkIiwiZGVncmVlcyIsInJhZFRvRGVnIiwicmFkaWFucyIsImlzUG93ZXJPZlR3byIsImNlaWxQb3dlck9mVHdvIiwicG93IiwiY2VpbCIsImxvZyIsIkxOMiIsImZsb29yUG93ZXJPZlR3byJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUEsSUFBSUEsS0FBSyxHQUFHO0FBRVhDLEVBQUFBLE9BQU8sRUFBRUMsSUFBSSxDQUFDQyxFQUFMLEdBQVUsR0FGUjtBQUdYQyxFQUFBQSxPQUFPLEVBQUUsTUFBTUYsSUFBSSxDQUFDQyxFQUhUO0FBS1hFLEVBQUFBLFlBQVksRUFBSSxZQUFZO0FBRTNCO0FBRUEsUUFBSUMsR0FBRyxHQUFHLEVBQVY7O0FBRUEsU0FBTSxJQUFJQyxDQUFDLEdBQUcsQ0FBZCxFQUFpQkEsQ0FBQyxHQUFHLEdBQXJCLEVBQTBCQSxDQUFDLEVBQTNCLEVBQWlDO0FBRWhDRCxNQUFBQSxHQUFHLENBQUVDLENBQUYsQ0FBSCxHQUFXLENBQUVBLENBQUMsR0FBRyxFQUFKLEdBQVMsR0FBVCxHQUFlLEVBQWpCLElBQTBCQSxDQUFG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QUFQO0FBRUE7QUE5SVUsQ0FBWiIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGF1dGhvciBhbHRlcmVkcSAvIGh0dHA6Ly9hbHRlcmVkcXVhbGlhLmNvbS9cbiAqIEBhdXRob3IgbXJkb29iIC8gaHR0cDovL21yZG9vYi5jb20vXG4gKi9cblxudmFyIF9NYXRoID0ge1xuXG5cdERFRzJSQUQ6IE1hdGguUEkgLyAxODAsXG5cdFJBRDJERUc6IDE4MCAvIE1hdGguUEksXG5cblx0Z2VuZXJhdGVVVUlEOiAoIGZ1bmN0aW9uICgpIHtcblxuXHRcdC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTA1MDM0L2hvdy10by1jcmVhdGUtYS1ndWlkLXV1aWQtaW4tamF2YXNjcmlwdC8yMTk2MzEzNiMyMTk2MzEzNlxuXG5cdFx0dmFyIGx1dCA9IFtdO1xuXG5cdFx0Zm9yICggdmFyIGkgPSAwOyBpIDwgMjU2OyBpICsrICkge1xuXG5cdFx0XHRsdXRbIGkgXSA9ICggaSA8IDE2ID8gJzAnIDogJycgKSArICggaSApLnRvU3RyaW5nKCAxNiApO1xuXG5cdFx0fVxuXG5cdFx0cmV0dXJuIGZ1bmN0aW9uIGdlbmVyYXRlVVVJRCgpIHtcblxuXHRcdFx0dmFyIGQwID0gTWF0aC5yYW5kb20oKSAqIDB4ZmZmZmZmZmYgfCAwO1xuXHRcdFx0dmFyIGQxID0gTWF0aC5yYW5kb20oKSAqIDB4ZmZmZmZmZmYgfCAwO1xuXHRcdFx0dmFyIGQyID0gTWF0aC5yYW5kb20oKSAqIDB4ZmZmZmZmZmYgfCAwO1xuXHRcdFx0dmFyIGQzID0gTWF0aC5yYW5kb20oKSAqIDB4ZmZmZmZmZmYgfCAwO1xuXHRcdFx0dmFyIHV1aWQgPSBsdXRbIGQwICYgMHhmZiBdICsgbHV0WyBkMCA+PiA4ICYgMHhmZiBdICsgbHV0WyBkMCA+PiAxNiAmIDB4ZmYgXSArIGx1dFsgZDAgPj4gMjQgJiAweGZmIF0gKyAnLScgK1xuXHRcdFx0XHRsdXRbIGQxICYgMHhmZiBdICsgbHV0WyBkMSA+PiA4ICYgMHhmZiBdICsgJy0nICsgbHV0WyBkMSA+PiAxNiAmIDB4MGYgfCAweDQwIF0gKyBsdXRbIGQxID4+IDI0ICYgMHhmZiBdICsgJy0nICtcblx0XHRcdFx0bHV0WyBkMiAmIDB4M2YgfCAweDgwIF0gKyBsdXRbIGQyID4+IDggJiAweGZmIF0gKyAnLScgKyBsdXRbIGQyID4+IDE2ICYgMHhmZiBdICsgbHV0WyBkMiA+PiAyNCAmIDB4ZmYgXSArXG5cdFx0XHRcdGx1dFsgZDMgJiAweGZmIF0gKyBsdXRbIGQzID4+IDggJiAweGZmIF0gKyBsdXRbIGQzID4+IDE2ICYgMHhmZiBdICsgbHV0WyBkMyA+PiAyNCAmIDB4ZmYgXTtcblxuXHRcdFx0Ly8gLnRvVXBwZXJDYXNlKCkgaGVyZSBmbGF0dGVucyBjb25jYXRlbmF0ZWQgc3RyaW5ncyB0byBzYXZlIGhlYXAgbWVtb3J5IHNwYWNlLlxuXHRcdFx0cmV0dXJuIHV1aWQudG9VcHBlckNhc2UoKTtcblxuXHRcdH07XG5cblx0fSApKCksXG5cblx0Y2xhbXA6IGZ1bmN0aW9uICggdmFsdWUsIG1pbiwgbWF4ICkge1xuXG5cdFx0cmV0dXJuIE1hdGgubWF4KCBtaW4sIE1hdGgubWluKCBtYXgsIHZhbHVlICkgKTtcblxuXHR9LFxuXG5cdC8vIGNvbXB1dGUgZXVjbGlkaWFuIG1vZHVsbyBvZiBtICUgblxuXHQvLyBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Nb2R1bG9fb3BlcmF0aW9uXG5cblx0ZXVjbGlkZWFuTW9kdWxvOiBmdW5jdGlvbiAoIG4sIG0gKSB7XG5cblx0XHRyZXR1cm4gKCAoIG4gJSBtICkgKyBtICkgJSBtO1xuXG5cdH0sXG5cblx0Ly8gTGluZWFyIG1hcHBpbmcgZnJvbSByYW5nZSA8YTEsIGEyPiB0byByYW5nZSA8YjEsIGIyPlxuXG5cdG1hcExpbmVhcjogZnVuY3Rpb24gKCB4LCBhMSwgYTIsIGIxLCBiMiApIHtcblxuXHRcdHJldHVybiBiMSArICggeCAtIGExICkgKiAoIGIyIC0gYjEgKSAvICggYTIgLSBhMSApO1xuXG5cdH0sXG5cblx0Ly8gaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTGluZWFyX2ludGVycG9sYXRpb25cblxuXHRsZXJwOiBmdW5jdGlvbiAoIHgsIHksIHQgKSB7XG5cblx0XHRyZXR1cm4gKCAxIC0gdCApICogeCArIHQgKiB5O1xuXG5cdH0sXG5cblx0Ly8gaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9TbW9vdGhzdGVwXG5cblx0c21vb3Roc3RlcDogZnVuY3Rpb24gKCB4LCBtaW4sIG1heCApIHtcblxuXHRcdGlmICggeCA8PSBtaW4gKSByZXR1cm4gMDtcblx0XHRpZiAoIHggPj0gbWF4ICkgcmV0dXJuIDE7XG5cblx0XHR4ID0gKCB4IC0gbWluICkgLyAoIG1heCAtIG1pbiApO1xuXG5cdFx0cmV0dXJuIHggKiB4ICogKCAzIC0gMiAqIHggKTtcblxuXHR9LFxuXG5cdHNtb290aGVyc3RlcDogZnVuY3Rpb24gKCB4LCBtaW4sIG1heCApIHtcblxuXHRcdGlmICggeCA8PSBtaW4gKSByZXR1cm4gMDtcblx0XHRpZiAoIHggPj0gbWF4ICkgcmV0dXJuIDE7XG5cblx0XHR4ID0gKCB4IC0gbWluICkgLyAoIG1heCAtIG1pbiApO1xuXG5cdFx0cmV0dXJuIHggKiB4ICogeCAqICggeCAqICggeCAqIDYgLSAxNSApICsgMTAgKTtcblxuXHR9LFxuXG5cdC8vIFJhbmRvbSBpbnRlZ2VyIGZyb20gPGxvdywgaGlnaD4gaW50ZXJ2YWxcblxuXHRyYW5kSW50OiBmdW5jdGlvbiAoIGxvdywgaGlnaCApIHtcblxuXHRcdHJldHVybiBsb3cgKyBNYXRoLmZsb29yKCBNYXRoLnJhbmRvbSgpICogKCBoaWdoIC0gbG93ICsgMSApICk7XG5cblx0fSxcblxuXHQvLyBSYW5kb20gZmxvYXQgZnJvbSA8bG93LCBoaWdoPiBpbnRlcnZhbFxuXG5cdHJhbmRGbG9hdDogZnVuY3Rpb24gKCBsb3csIGhpZ2ggKSB7XG5cblx0XHRyZXR1cm4gbG93ICsgTWF0aC5yYW5kb20oKSAqICggaGlnaCAtIGxvdyApO1xuXG5cdH0sXG5cblx0Ly8gUmFuZG9tIGZsb2F0IGZyb20gPC1yYW5nZS8yLCByYW5nZS8yPiBpbnRlcnZhbFxuXG5cdHJhbmRGbG9hdFNwcmVhZDogZnVuY3Rpb24gKCByYW5nZSApIHtcblxuXHRcdHJldHVybiByYW5nZSAqICggMC41IC0gTWF0aC5yYW5kb20oKSApO1xuXG5cdH0sXG5cblx0ZGVnVG9SYWQ6IGZ1bmN0aW9uICggZGVncmVlcyApIHtcblxuXHRcdHJldHVybiBkZWdyZWVzICogX01hdGguREVHMlJBRDtcblxuXHR9LFxuXG5cdHJhZFRvRGVnOiBmdW5jdGlvbiAoIHJhZGlhbnMgKSB7XG5cblx0XHRyZXR1cm4gcmFkaWFucyAqIF9NYXRoLlJBRDJERUc7XG5cblx0fSxcblxuXHRpc1Bvd2VyT2ZUd286IGZ1bmN0aW9uICggdmFsdWUgKSB7XG5cblx0XHRyZXR1cm4gKCB2YWx1ZSAmICggdmFsdWUgLSAxICkgKSA9PT0gMCAmJiB2YWx1ZSAhPT0gMDtcblxuXHR9LFxuXG5cdGNlaWxQb3dlck9mVHdvOiBmdW5jdGlvbiAoIHZhbHVlICkge1xuXG5cdFx0cmV0dXJuIE1hdGgucG93KCAyLCBNYXRoLmNlaWwoIE1hdGgubG9nKCB2YWx1ZSApIC8gTWF0aC5MTjIgKSApO1xuXG5cdH0sXG5cblx0Zmxvb3JQb3dlck9mVHdvOiBmdW5jdGlvbiAoIHZhbHVlICkge1xuXG5cdFx0cmV0dXJuIE1hdGgucG93KCAyLCBNYXRoLmZsb29yKCBNYXRoLmxvZyggdmFsdWUgKSAvIE1hdGguTE4yICkgKTtcblxuXHR9XG5cbn07XG5cblxuZXhwb3J0IHsgX01hdGggfTsiXX0=